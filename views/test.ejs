<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enter New Password - Stylo Fasion</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Inter:wght@400;500;600&display=swap');
        
        .title-font {
            font-family: 'Playfair Display', serif;
        }
        
        body {
            font-family: 'Inter', sans-serif;
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen flex items-center justify-center p-4 md:p-8">
    <!-- Main Container -->
    <div class="w-full max-w-6xl">
        <div class="bg-white rounded-3xl shadow-xl overflow-hidden border border-gray-200">
            <div class="grid grid-cols-1 lg:grid-cols-2 min-h-[700px]">
                <!-- Left Side - Image Section -->
                <div class="relative bg-gradient-to-b from-amber-800 via-amber-600 to-amber-200 rounded-l-3xl flex items-center justify-center p-8 lg:p-12">
                    <!-- Empty space for bracelet image -->
                    <div class="w-full h-full flex items-center justify-center">
                        <div class="w-full max-w-md aspect-square flex items-center justify-center">
                            <div class="text-center">
                                <div class="w-80 h-80 bg-amber-700/20 rounded-lg flex items-center justify-center">
                                    <span class="text-amber-900/30 text-sm">Bracelet Image Placeholder<br/>600x700px</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Right Side - New Password Form -->
                <div class="flex flex-col justify-between p-8 lg:p-12 xl:p-16">
                    <div class="flex-1 flex flex-col justify-center max-w-md mx-auto w-full">
                        <!-- Title -->
                        <h1 class="title-font text-5xl lg:text-6xl text-red-900 mb-16">Stylo Fasion</h1>
                        
                        <!-- New Password Heading -->
                        <h2 class="text-2xl font-semibold text-red-900 mb-12">Enter Your New Password</h2>

                        <!-- New Password Form -->
                        <form action="/reset-password" method="POST" class="space-y-6">
                            <!-- New Password Input -->
                            <div>
                                <label for="newPassword" class="block text-sm font-medium text-red-900 mb-2">
                                    New Password
                                </label>
                                <input 
                                    type="password" 
                                    id="newPassword" 
                                    name="newPassword" 
                                    required
                                    minlength="8"
                                    class="w-full px-0 py-2 border-0 border-b-2 border-gray-300 focus:border-red-900 focus:ring-0 outline-none transition-colors bg-transparent"
                                    placeholder=""
                                >
                            </div>

                            <!-- Confirmation Password Input -->
                            <div>
                                <label for="confirmPassword" class="block text-sm font-medium text-red-900 mb-2">
                                    Confirmation Password
                                </label>
                                <input 
                                    type="password" 
                                    id="confirmPassword" 
                                    name="confirmPassword" 
                                    required
                                    minlength="8"
                                    class="w-full px-0 py-2 border-0 border-b-2 border-gray-300 focus:border-red-900 focus:ring-0 outline-none transition-colors bg-transparent"
                                    placeholder=""
                                >
                            </div>

                            <!-- Submit Button -->
                            <button 
                                type="submit" 
                                class="w-full bg-red-900 text-white py-3 rounded-lg font-medium hover:bg-red-800 transition-colors mt-8"
                            >
                                Submit
                            </button>
                        </form>
                    </div>

                    <!-- Footer Terms -->
                    <div class="text-right mt-6">
                        <a href="/terms" class="text-xs text-gray-800 hover:text-gray-900 hover:underline">
                            Stylo Fasion Terms & Coditions
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Password validation
        document.querySelector('form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const newPassword = document.getElementById('newPassword').value;
            const confirmPassword = document.getElementById('confirmPassword').value;
            
            // Check if passwords match
            if (newPassword !== confirmPassword) {
                alert('Passwords do not match. Please try again.');
                return;
            }
            
            // Check password strength
            if (newPassword.length < 8) {
                alert('Password must be at least 8 characters long.');
                return;
            }
            
            // Send data to server
            const formData = new FormData(this);
            const data = Object.fromEntries(formData);
            
            fetch('/reset-password', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(data)
            })
            .then(response => response.json())
            .then(result => {
                if (result.success) {
                    alert('Password reset successfully!');
                    window.location.href = '/login';
                } else {
                    alert('Failed to reset password. Please try again.');
                }
            })
            .catch(error => {
                console.error('Error:', error);
                alert('An error occurred. Please try again.');
            });
        });

        // Show/hide password toggle (optional)
        function togglePasswordVisibility(inputId) {
            const input = document.getElementById(inputId);
            if (input.type === 'password') {
                input.type = 'text';
            } else {
                input.type = 'password';
            }
        }
    </script>
</body>
</html>